
<script type="text/javascript" src="qwebchannel.js"></script>
<script type="text/javascript">
    // 这是QML端的QtObject
	// <script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js">
    var backend;
 
    window.onload = function()
    {
        new QWebChannel(qt.webChannelTransport, function(channel) {
            // 在channel.object下，所有发布的对象在通道中都是可用的
            // 在附加的WebChannel.id属性中设置的标识符。
            backend = channel.objects.backend;
 
            //连接信号
            backend.someSignal.connect(function(someText) {
                alert("Got signal: " + someText);
                document.getElementById("lbl").innerHTML = someText;
            });
        });
    }
 
    // 演示异步交互
    var result = "ololo";
    function changeLabel()
    {
        var textInputValue = document.getElementById("input").value.trim();
        if (textInputValue.length === 0)
        {
            alert("You haven't entered anything!");
            return;
        }
 
        // 调用方法并接收返回值
        backend.changeText(textInputValue, function(callback) {
            result = callback;
            // 由于它是异步的，因此稍后将出现此警报并显示实际结果
            alert(result);
            // 将变量重置为默认值
            result = "ololo";
        });
        // 此警告将首先出现，并显示默认的“ololo”
        alert(result);
    }
 
    // 您还可以从QML端读取/写入QtObject的属性
    function getPropertyValue()
    {
        var originalValue = backend.someProperty;
 
        alert(backend.someProperty);
        backend.someProperty = "some another value";
        alert(backend.someProperty);
 
        backend.someProperty = originalValue;
    }
</script>
